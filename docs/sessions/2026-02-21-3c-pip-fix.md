# Session: Phase 3C — pip --break-system-packages fix

**Date:** 2026-02-21
**Status:** Complete

## Problem

Ubuntu 24.04 uses PEP 668 "externally-managed-environment" protection. Running
`pip install tap-*` without a virtualenv fails with:

```
error: externally-managed-environment
× This environment is managed by the system package manager...
```

## Fix

`connector-manager/src/runners/named.rs` — added `--break-system-packages` flag
to the pip auto-install command in `run_tap_once`:

```rust
tokio::process::Command::new("pip")
    .arg("install")
    .arg("--break-system-packages")
    .arg(&config.tap_name)
    .status()
    .await
```

## Dockerfile

No changes needed. `pip install` only runs at container runtime (when a tap is
first triggered), not during the Docker build step.

## Files Modified

- `connector-manager/src/runners/named.rs`

## Deploy

```
docker compose build --no-cache connector-manager && docker compose up -d connector-manager
```
