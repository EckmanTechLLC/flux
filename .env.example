# Flux Environment Configuration
# Copy to .env and fill in values before running docker compose up

# =============================================================================
# REQUIRED
# =============================================================================

# Encryption key for stored OAuth credentials (connector tokens).
# Must be a base64-encoded 32-byte random value.
# Generate with: openssl rand -base64 32
# Flux will NOT start without this set.
FLUX_ENCRYPTION_KEY=

# =============================================================================
# CONNECTOR OAUTH (required to use connectors)
# =============================================================================

# GitHub OAuth App credentials.
# Create an OAuth App at: https://github.com/settings/developers
# Set the callback URL to: <FLUX_OAUTH_CALLBACK_BASE_URL>/api/connectors/github/oauth/callback
FLUX_OAUTH_GITHUB_CLIENT_ID=
FLUX_OAUTH_GITHUB_CLIENT_SECRET=

# Public base URL of this Flux instance. Used to build OAuth callback URLs.
# Must be reachable by the OAuth provider (GitHub, etc.) during the auth flow.
# Example: https://flux.example.com
# For local testing with a tunnel: https://your-tunnel-url.trycloudflare.com
FLUX_OAUTH_CALLBACK_BASE_URL=

# =============================================================================
# OPTIONAL
# =============================================================================

# Admin token for the runtime config API (PUT /api/admin/config).
# If unset, admin writes are disabled. Reads (GET /api/admin/config) are open.
# Use any strong random string. Example: openssl rand -hex 32
FLUX_ADMIN_TOKEN=

# Enable namespace token authentication for write operations.
# false (default): no auth required â€” use for trusted internal networks.
# true: Bearer token required for writes; reads remain open.
FLUX_AUTH_ENABLED=false

# Path to the encrypted SQLite credentials database (inside the container).
# Mounted from ./data on the host (see docker compose volumes).
# Default is fine for most deployments.
FLUX_CREDENTIALS_DB=/data/credentials.db

# Flux API port (inside the container). Exposed as 3000 on host.
PORT=3000
